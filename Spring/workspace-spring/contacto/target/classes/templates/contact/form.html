<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{fragments/layout.html}">
<head>
    <th:block th:fragment="page-head">
        <title th:text="${action == 'create'} ? 'A침adir Nueva Persona' : (${action == 'edit'} ? 'Editar Persona' : 'Confirmar Eliminaci칩n')"></title>
    </th:block>
</head>
<body>

    <div th:fragment="mainContent">

        <h2 class="mb-4" th:classappend="${action == 'delete'} ? 'text-danger' : 'text-primary'">
            <span th:if="${action == 'create'}">A침adir Nueva Contacto</span>
            <span th:if="${action == 'edit'}">Editar Contacto</span>
            <span th:if="${action == 'delete'}">Confirmar Eliminaci칩n</span>
        </h2>


        
        <form th:action="${action == 'create'} ? @{/contact/new} : 
        		 (${action == 'edit'} ? @{/contact/edit/{id}(id=${contact.id})} : 
                 @{/contact/delete(id=${contact.id})})" th:object="${contact}" th:method="POST"   class="p-4 border rounded shadow-sm">
            
            <input type="hidden" th:if="${action != 'create'}" th:field="*{id}" />

            <div class="mb-3">
                <label for="name" class="form-label">Nombre:</label>
                <input 
                    type="text" 
					readonly
                    class="form-control" 
                    id="name" 
                    th:field="*{person.name}"
                    placeholder="Introduce el nombre"
                    th:disabled="${action == 'delete'}" /> 
                <div th:if="${#fields.hasErrors('person.name')}" class="text-danger small" th:errors="*{person.name}">Error de nombre</div>
            </div>

            <div class="mb-3">
                <label for="lastName" class="form-label">Type:</label>
                <input 
                    type="text" 
                    class="form-control" 
                    id="lastName" 
                    th:field="*{contactType}" 
                    placeholder="Introduce el nuevo contacto"
                    th:disabled="${action == 'delete'}" />
                <div th:if="${#fields.hasErrors('contactType')}" class="text-danger small" th:errors="*{contactType}">Error de contactType</div>
            </div>

			<div class="mb-3">
			                <label for="lastName" class="form-label">value:</label>
			                <input 
			                    type="text" 
			                    class="form-control" 
			                    id="lastName" 
			                    th:field="*{value}" 
			                    placeholder="Introduce el nuevo contacto"
			                    th:disabled="${action == 'delete'}" />
			 	<div th:if="${#fields.hasErrors('value')}" class="text-danger small" th:errors="*{value}">Error de value</div>
			 </div>

			 <div class="mt-4">
                 <th:block>
                     <button type="submit" class="btn btn-primary me-2">
                         <span th:if="${action == 'create'}">Guardar</span>
                         <span th:if="${action == 'edit'}">Actualizar</span>
                         <span th:if="${action == 'delete'}">Borrar</span>
                     </button>
                     <a th:href="@{/contact/list}" class="btn btn-secondary">Cancelar</a>
                     
                   
                 </th:block>

			  </div>
        </form>
        
    </div>

</body>
</html>